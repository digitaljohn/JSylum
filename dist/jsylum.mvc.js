(function(window){var Injector=function(){};var p=Injector.prototype;p._singletons=[];p.mapSingleton=function(type){this._singletons.push({type:type,object:new type()})};p.getSingleton=function(type){for(var singleton in this._singletons){if(this._singletons[singleton].type===type){return this._singletons[singleton].object}}return{}};window.Injector=Injector}(window));(function(window){var LanguageManager=function(){};var p=LanguageManager.prototype;p._content={};p.add=function(key,value){this._content[key]=value};p.setContent=function(content){this._content=content};p.getText=function(key){var args=arguments;if(arguments.length<2){return this._content[key]}var string=String(this._content[key]);var pattern=new RegExp("%([1-"+arguments.length+"])","g");return string.replace(pattern,function(match,index){return args[index]})};window.LanguageManager=LanguageManager}(window));(function(window){var EventBus=function(){};var p=EventBus.prototype;p._listeners={};p.addEventListener=function(type,listener,ctx){var obj={callback:listener,context:ctx};var exists=false;var events;if(this._listeners[type]===undefined){this._listeners[type]=[]}events=this._listeners[type];for(var i=0;i<events.length;i++){if(events[i].callback===listener&&events[i].context===ctx){exists=true;break}}if(exists===false){this._listeners[type].push(obj)}};p.dispatchEvent=function(event){var events=this._listeners[event.type];if(typeof events!=="undefined"){for(var i=0;i<events.length;i++){events[i].callback.call(events[i].context,event)}}};p.removeEventListener=function(type,listener,ctx){var index;var events=this._listeners[type];if(typeof events!=="undefined"){for(var i=0;i<events.length;i++){if(events[i].callback===listener&&events[i].context===ctx){index=i;break}}if(index!==-1){this._listeners[type].splice(index,1)}}};p.mapEvent=function(type,listener,ctx,singleFire){this.addEventListener(type,listener,ctx)};window.EventBus=EventBus}(window));(function(window){var MediatorMap=function(){};var p=MediatorMap.prototype;p._map=[];p._mediators=[];p.mapView=function(view,mediator){this._map.push({view:view,mediator:mediator})};p.mediate=function(view){var index=false;for(var i in this._map){if(view instanceof this._map[i].view){index=i;break}}if(index!==false){var mediator=new this._map[index].mediator(view);this._mediators.push(mediator)}};window.MediatorMap=MediatorMap}(window));(function(window){var JSylum=function(){if(window._initable){this.initialize()}};var p=JSylum.prototype;p._mediatorMap=null;p._eventBus=null;p.initialize=function(){this._mediatorMap=injector.getSingleton(MediatorMap);this._eventBus=injector.getSingleton(EventBus)};p.addContextListener=function(type,listener,scope){this._eventBus.addEventListener(type,listener,scope)},p.removeContextListener=function(type,listener,scope){this._eventBus.removeEventListener(type,listener,scope)},p.dispatch=function(event){this._eventBus.dispatchEvent(event)},p.getSingleton=function(type){return injector.getSingleton(type)};window.JSylum=JSylum}(window));(function(window){var Context=function(){this.initialize()};var p=Context.prototype=new JSylum();p.JSylum_initialize=p.initialize;p.initialize=function(){window._initable=true;window.injector=new Injector();window.injector.mapSingleton(MediatorMap);window.injector.mapSingleton(EventBus);window.lang=new LanguageManager();this.JSylum_initialize()};window.Context=Context}(window));(function(window){var Mediator=function(view){if(window._initable){this.initialize(view)}};var p=Mediator.prototype=new JSylum();p._view=null;p.JSylum_initialize=p.initialize;p.initialize=function(view){this.JSylum_initialize();this._view=view};p.destroy=function(){this._view.destroy()};window.Mediator=Mediator}(window));(function(window){var View=function(parent){if(window._initable){this.initialize(parent)}};var p=View.prototype;p._parent=null;p._el=null;p._elType="div";p.initialize=function(parent){this._parent=parent;this.draw();injector.getSingleton(MediatorMap).mediate(this)};p.draw=function(){this._el=document.createElement(this._elType);this._parent.appendChild(this._el)};p.redraw=function(){};p.destroy=function(){this._parent.removeChild(this._el)};p.getText=function(key){return window.lang.getText.apply(window.lang,arguments)},window.View=View}(window));(function(window){var Model=function(){if(window._initable){this.initialize()}};var p=Model.prototype=new JSylum();p.JSylum_initialize=p.initialize;p.initialize=function(){this.JSylum_initialize()};window.Model=Model}(window));(function(window){var Service=function(view){this.initialize(view)};var p=Service.prototype=new JSylum();window.Service=Service}(window));